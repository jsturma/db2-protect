+ shift
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'msg=[2025-11-21 15:31:50] [INFO] Connected: SAMPLE'
+ echo '[2025-11-21 15:31:50] [INFO] Connected: SAMPLE'
[2025-11-21 15:31:50] [INFO] Connected: SAMPLE
+ echo '[2025-11-21 15:31:50] [INFO] Connected: SAMPLE'
+ verify_db_rights
+ log INFO 'Verifying backup rights...'
+ local l=INFO
+ shift
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'msg=[2025-11-21 15:31:50] [INFO] Verifying backup rights...'
+ echo '[2025-11-21 15:31:50] [INFO] Verifying backup rights...'
[2025-11-21 15:31:50] [INFO] Verifying backup rights...
+ echo '[2025-11-21 15:31:50] [INFO] Verifying backup rights...'
++ db2 'SELECT 1 FROM SYSIBM.SYSDUMMY1'
+ local 'conn_check=SQL1024N  A database connection does not exist.  SQLSTATE=08003'
+ echo 'SQL1024N  A database connection does not exist.  SQLSTATE=08003'
+ grep -q 'SQL1024N\|SQLSTATE=08003'
+ log INFO 'Connection lost, reconnecting...'
+ local l=INFO
+ shift
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'msg=[2025-11-21 15:31:51] [INFO] Connection lost, reconnecting...'
+ echo '[2025-11-21 15:31:51] [INFO] Connection lost, reconnecting...'
[2025-11-21 15:31:51] [INFO] Connection lost, reconnecting...
+ echo '[2025-11-21 15:31:51] [INFO] Connection lost, reconnecting...'
+ db2 connect to SAMPLE
+ local auth_id=
++ db2 'VALUES CURRENT USER'
+ local 'db2out=SQL1024N  A database connection does not exist.  SQLSTATE=08003'
++ echo 'SQL1024N  A database connection does not exist.  SQLSTATE=08003'
++ awk 'NR>3 && NF>0 && !/^[[:space:]]*$/ && !/SQL/ && !/---/ && !/record/ {print $1; exit}'
+ auth_id=
+ [[ -z '' ]]
++ db2 'VALUES USER'
+ db2out='SQL1024N  A database connection does not exist.  SQLSTATE=08003'
